# TWebLive - 腾讯云 Web 直播互动组件

### 简介

腾讯云 Web 直播互动组件，以腾讯云 Web 超级播放器 - [TcPlayer](https://cloud.tencent.com/document/product/454/7503) 和腾讯云即时通信 IM - [TIM](https://imsdk-1252463788.file.myqcloud.com/IM_DOC/Web/TIM.html) 为基础，封装了简单易用的 [API](https://webim-1252463788.cos.ap-shanghai.myqcloud.com/tweblive/TWebLive.html)，提供了免费开源的 [Demo](https://webim-1252463788.cos.ap-shanghai.myqcloud.com/TWebLive-demo.zip)，方便开发者快速接入和使用。适用于 Web 直播互动场景，如大型会议、活动、课程、讲座等的在线直播，带货直播的微信 H5 分享等，效果如下：

![](https://webim-1252463788.cos.ap-shanghai.myqcloud.com/tweblivedemo/wechat-0.png)

![](https://main.qcloudimg.com/raw/04f7ad86951354ba40f5d85cd204b5f5.jpg)

![](https://main.qcloudimg.com/raw/2c46a40ce36c0faecc01ef12d317e803.png)

### 在线体验

微信扫一扫 ![](https://webim-1252463788.cos.ap-shanghai.myqcloud.com/tweblivedemo/qrcode.png)

或者 [点我体验](https://webim-1252463788.cos.ap-shanghai.myqcloud.com/tweblivedemo/index.html)

### [api list](https://webim-1252463788.file.myqcloud.com/tweblive/TWebLive.html)
| api | 含义 |
| :-----| :----- |
| new TWebLive(options) | 腾讯云 Web 直播组件入口类。接入前，您需要在 [云通信控制台](https://console.cloud.tencent.com/avc) 中创建一个云通信应用，并取得 SDKAppID。|
| load(url) | 通过视频地址加载视频 |
| play() | 开始播放视频 |
| pause() | 暂停播放视频 |
| mutePlayer() | 静音播放器 |
| unmutePlayer | 取消静音播放器 |
| setVolume(value) | 设置播放器音量 |
| requestFullscreen() | 请求浏览器（user agent）将播放器（甚至延伸到它的后代元素）置为全屏模式，隐去屏幕上的浏览器所有 UI 元素，以及其它应用 |
| exitFullscreen() | 从全屏模式切换到窗口模式 |
| getCurrentTime() | 获取当前播放视频的时间 |
| destroyPlayer() | 销毁播放器 |
| setLogLevel(level) | 设置日志级别，低于 level 的日志将不会输出 |
| on(eventName, handler, context) | 监听事件 |
| off(eventName, handler, context) | 取消监听事件 |
| enterRoom(roomID) | 加入直播间 |
| exitRoom(roomID) | 离开直播间 |
| login(options) | 登录腾讯云即时通信 IM 系统 |
| logout() | 登出腾讯云即时通信 IM 系统 |
| setMyProfile(options) | 设置个人资料，如昵称和头像 |
| getMyProfile() | 获取个人资料，如昵称和头像 |
| sendTextMessage(options) | 聊天互动，在直播间发送文本消息 |
| sendCustomMessage(options) | 在直播间发送自定义消息，如点赞、送礼等 |

### [event list](https://webim-1252463788.cos.ap-shanghai.myqcloud.com/tweblive/module-EVENT.html)
| event | 含义 |
| :-----| :----- |
| TWEBLIVE.EVENT.PLAYING | 播放器进入播放状态时触发 |
| TWEBLIVE.EVENT.PAUSE | 播放器暂停时触发 |
| TWEBLIVE.EVENT.WAITING | 播放器缓冲时触发 |
| TWEBLIVE.EVENT.TIMEUPDATE | 播放器播放进度更新时触发 |
| TWEBLIVE.EVENT.ENDED | 视频播放结束时触发 |
| TWEBLVIE.EVENT.ERROR | 播放器遇到错误时触发 |
| TWEBLIVE.EVENT.IM_READY | SDK 进入 ready 状态时触发，接入侧监听此事件，然后可调用 sendTextMessage 等发送消息的 api |
| TWEBLIVE.EVENT.IM_NOT_READY | SDK 进入 not ready 状态时触发，此时接入侧将无法使用 sendTextMessage 等发送消息的 api |
| TWEBLIVE.EVENT.TEXT_MESSAGE_RECEIVED | 进入直播间后收到文本消息时触发 |
| TWEBLIVE.EVENT.CUSTOM_MESSAGE_RECEIVED | 进入直播间后收到点赞、送礼等自定义消息时触发 |
| TWEBLIVE.EVENT.REMOTE_USER_JOIN | 有远端用户进入直播间时触发 |
| TWEBLIVE.EVENT.REMOTE_USER_LEAVE | 有远端用户离开直播间时触发 |
| TWEBLIVE.EVENT.KICKED_OUT | 账号被踢下线时触发 |
| TWEBLIVE.EVENT.NET_STATE_CHANGE | 网络状态发生改变时触发 |

### [type list](https://webim-1252463788.cos.ap-shanghai.myqcloud.com/tweblive/module-TYPES.html)
| type | 含义 |
| :-----| :----- |
| TWEBLIVE.TYPES.MSG_PRIORITY_HIGH | 直播间消息高优先级。建议选择该优先级的消息类型：红包消息和礼物消息 |
| TWEBLIVE.TYPES.TYPES.MSG_PRIORITY_NORMAL | 直播间消息普通优先级。建议选择该优先级的消息类型：普通文本消息 |
| TWEBLIVE.TYPES.MSG_PRIORITY_LOW | 直播间消息低优先级。建议选择该优先级的消息类型：点赞消息 |
| TWEBLIVE.TYPES.MSG_PRIORITY_LOWEST | 直播间消息最低优先级。建议选择该优先级的消息类型：最不重要的消息 |
| TWEBLIVE.TYPES.KICKED_OUT_MULT_ACCOUNT | Web 端实例同时在线个数超限被踢 |
| TWEBLIVE.TYPES.KICKED_OUT_MULT_DEVICE | 多端登录超限被踢 |
| TWEBLIVE.TYPES.KICKED_OUT_USERSIG_EXPIRED | userSig 过期被踢 |
| TWEBLIVE.TYPES.NET_STATE_CONNECTED | 已接入网络 |
| TWEBLIVE.TYPES.NET_STATE_CONNECTING | 连接中 |
| TWEBLIVE.TYPES.NET_STATE_DISCONNECTED | 未接入网络 |
| TWEBLVIE.ENTER_ROOM_SUCCESS | 加入直播间成功 |
| TWEBLIVE.TYPES.ALREADY_IN_ROOM | 已在直播间内 |

### 参考文档

- [腾讯云 Web 直播互动组件 API](https://webim-1252463788.cos.ap-shanghai.myqcloud.com/tweblive/TWebLive.html)
- [腾讯云 Web 超级播放器 TcPlayer](https://cloud.tencent.com/document/product/454/7503)
- [腾讯云即时通信 IM](https://cloud.tencent.com/document/product/269/1498)
- [WebIM API](https://imsdk-1252463788.file.myqcloud.com/IM_DOC/Web/TIM.html)
- [腾讯实时音视频 TRTC](https://cloud.tencent.com/document/product/647/16788)
- [TRTC Electron API](https://cloud.tencent.com/document/product/647/38551)
