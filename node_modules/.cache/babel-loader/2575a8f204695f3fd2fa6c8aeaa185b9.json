{"remainingRequest":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!/Users/yanglin/Desktop/test/fingernft/vue-admin/src/views/sys/log.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/src/views/sys/log.vue","mtime":1646290558232},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/babel.config.js","mtime":1646290558160},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8gIGltcG9ydCB7IGxpc3RMb2cgfSBmcm9tICdAL2FwaS9sb2cnCmltcG9ydCBQYWdpbmF0aW9uIGZyb20gIkAvY29tcG9uZW50cy9QYWdpbmF0aW9uIjsKaW1wb3J0IGkxOG4gZnJvbSAiQC9pMThuL2kxOG4uanMiOwp2YXIgdHlwZU1hcCA9IHsKICAwOiAnc3lzdGVtTWFuYWdlbWVudC5nZW5lcmFsT3BlcmF0aW9uJywKICAxOiAnc3lzdGVtTWFuYWdlbWVudC5zYWZlT3BlcmF0aW9uJywKICAyOiAnc3lzdGVtTWFuYWdlbWVudC5vcmRlck9wZXJhdGlvbicsCiAgMzogJ3N5c3RlbU1hbmFnZW1lbnQub3RoZXJPcGVyYXRpb25zJwp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkxvZyIsCiAgY29tcG9uZW50czogewogICAgUGFnaW5hdGlvbjogUGFnaW5hdGlvbgogIH0sCiAgZmlsdGVyczogewogICAgdHlwZUZpbHRlcjogZnVuY3Rpb24gdHlwZUZpbHRlcih0eXBlKSB7CiAgICAgIHJldHVybiBpMThuLnQodHlwZU1hcFt0eXBlXSk7CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogbnVsbCwKICAgICAgdG90YWw6IDAsCiAgICAgIGxpc3RMb2FkaW5nOiB0cnVlLAogICAgICBsaXN0UXVlcnk6IHsKICAgICAgICBwYWdlOiAxLAogICAgICAgIGxpbWl0OiAyMCwKICAgICAgICBuYW1lOiB1bmRlZmluZWQsCiAgICAgICAgc29ydDogImNyZWF0ZV90aW1lIiwKICAgICAgICBvcmRlcjogImRlc2MiCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgbmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgnc3lzdGVtTWFuYWdlbWVudC5ydWxlMycpLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTsgLy8gbGlzdExvZyh0aGlzLmxpc3RRdWVyeSkKICAgICAgLy8gICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIC8vICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3QKICAgICAgLy8gICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsCiAgICAgIC8vICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2UKICAgICAgLy8gICB9KQogICAgICAvLyAgIC5jYXRjaCgoKSA9PiB7CiAgICAgIC8vICAgICB0aGlzLmxpc3QgPSBbXQogICAgICAvLyAgICAgdGhpcy50b3RhbCA9IDAKICAgICAgLy8gICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZQogICAgICAvLyAgIH0pCgogICAgICB0aGlzLiRhcGkoImxvZy5saXN0IiwgdGhpcy5saXN0UXVlcnkpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdDsKICAgICAgICBfdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7CiAgICAgICAgX3RoaXMubGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLmxpc3QgPSBbXTsKICAgICAgICBfdGhpcy50b3RhbCA9IDA7CiAgICAgICAgX3RoaXMubGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlRmlsdGVyOiBmdW5jdGlvbiBoYW5kbGVGaWx0ZXIoKSB7CiAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2UgPSAxOwogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA,wCADA;AAEA,qCAFA;AAGA,sCAHA;AAIA;AAJA;AAMA;AACAA,aADA;AAEAC;AAAAC;AAAA,GAFA;AAGAC;AACAC,cADA,sBACAC,IADA,EACA;AACA;AACA;AAHA,GAHA;AAQAC,MARA,kBAQA;AACA;AACAC,gBADA;AAEAC,cAFA;AAGAC,uBAHA;AAIAC;AACAC,eADA;AAEAC,iBAFA;AAGAZ,uBAHA;AAIAa,2BAJA;AAKAC;AALA,OAJA;AAWAC;AACAf,eACA;AAAAgB;AAAAC;AAAAC;AAAA,SADA;AADA;AAXA;AAiBA,GA1BA;AA2BAC,SA3BA,qBA2BA;AACA;AACA,GA7BA;AA8BAC;AACAC,WADA,qBACA;AAAA;;AACA,8BADA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,4CACAC,IADA,CACA;AACA;AACA;AACA;AACA,OALA,EAMAC,KANA,CAMA;AACA;AACA;AACA;AACA,OAVA;AAWA,KAzBA;AA0BAC,gBA1BA,0BA0BA;AACA;AACA;AACA;AA7BA;AA9BA","names":["name","components","Pagination","filters","typeFilter","type","data","list","total","listLoading","listQuery","page","limit","sort","order","rules","required","message","trigger","created","methods","getList","then","catch","handleFilter"],"sourceRoot":"src/views/sys","sources":["log.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n\n    <!-- 查询和其他操作 -->\n    <div class=\"filter-container\">\n      <el-input v-model=\"listQuery.name\" clearable class=\"filter-item width-200px\" \n        :placeholder=\"$t('systemManagement.placeholder2')\" />\n      <el-button v-permission=\"['GET /admin/log/list']\" class=\"filter-item\" type=\"primary\"\n        icon=\"el-icon-search\" @click=\"handleFilter\">{{$t('systemManagement.select')}}</el-button>\n    </div>\n\n    <!-- 查询结果 -->\n    <el-table v-loading=\"listLoading\" :data=\"list\" :element-loading-text=\"$t('util.loadingText')\" border fit\n      highlight-current-row>\n      <el-table-column align=\"center\" :label=\"$t('systemManagement.operationsAdministrator')\" prop=\"admin\" />\n      <el-table-column align=\"center\" :label=\"$t('systemManagement.ipAddress')\" prop=\"ip\" />\n      <el-table-column align=\"center\" :label=\"$t('systemManagement.operatingTime')\" prop=\"createTime\" />\n      <el-table-column align=\"center\" :label=\"$t('systemManagement.operatingClass')\" prop=\"type\">\n        <template slot-scope=\"scope\">\n          <!-- <el-tag>{{ scope.row.type | $t(typeFilter[scope.row.type]) }}</el-tag> -->\n          <el-tag>{{ scope.row.type | typeFilter }}</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" :label=\"$t('systemManagement.operationAction')\" prop=\"action\" >\n        <template slot-scope=\"scope\">\n          {{$t('systemManagement.'+scope.row.action)}}\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" :label=\"$t('systemManagement.operatingState')\" prop=\"status\">\n        <template slot-scope=\"scope\">\n          <el-tag :type=\"scope.row.status ? 'success' : 'error' \">\n            {{ scope.row.status ? $t('util.success') : $t('util.fail') }}</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" :label=\"$t('systemManagement.operationResult')\" prop=\"result\" />\n      <el-table-column align=\"center\" :label=\"$t('systemManagement.noteInformation')\" prop=\"comment\" />\n\n    </el-table>\n\n    <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"listQuery.page\"\n      :limit.sync=\"listQuery.limit\" @pagination=\"getList\" />\n\n  </div>\n</template>\n\n<script>\n//  import { listLog } from '@/api/log'\nimport Pagination from \"@/components/Pagination\";\nimport i18n from \"@/i18n/i18n.js\";\n  const typeMap = {\n        0: 'systemManagement.generalOperation',\n        1: 'systemManagement.safeOperation',\n        2: 'systemManagement.orderOperation',\n        3: 'systemManagement.otherOperations',\n      };\nexport default {\n  name: \"Log\",\n  components: { Pagination },\n  filters: {\n    typeFilter(type) {\n      return i18n.t(typeMap[type]);\n    },\n  },\n  data() {\n    return {\n      list: null,\n      total: 0,\n      listLoading: true,\n      listQuery: {\n        page: 1,\n        limit: 20,\n        name: undefined,\n        sort: \"create_time\",\n        order: \"desc\",\n      },\n      rules: {\n        name: [\n          { required: true, message: this.$t('systemManagement.rule3'), trigger: \"blur\" },\n        ],\n      },\n    };\n  },\n  created() {\n    this.getList()\n  },\n  methods: {\n    getList() {\n      this.listLoading = true\n      // listLog(this.listQuery)\n      //   .then(response => {\n      //     this.list = response.data.list\n      //     this.total = response.data.total\n      //     this.listLoading = false\n      //   })\n      //   .catch(() => {\n      //     this.list = []\n      //     this.total = 0\n      //     this.listLoading = false\n      //   })\n        this.$api(\"log.list\", this.listQuery)\n        .then((response) => {\n          this.list = response.data.list;\n          this.total = response.data.total;\n          this.listLoading = false;\n        })\n        .catch(() => {\n          this.list = [];\n          this.total = 0;\n          this.listLoading = false;\n        });\n    },\n    handleFilter() {\n      this.listQuery.page = 1;\n      this.getList();\n    },\n  },\n};\n</script>\n<style scoped>\n.width-200px{\n  width:200px\n}\n</style>"]}]}