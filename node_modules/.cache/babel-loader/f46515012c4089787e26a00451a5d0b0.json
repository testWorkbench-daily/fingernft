{"remainingRequest":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_eslint-loader@2.2.1@eslint-loader/index.js??ref--13-0!/Users/yanglin/Desktop/test/fingernft/vue-admin/src/store/modules/permission.js","dependencies":[{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/src/store/modules/permission.js","mtime":1646290558204},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/babel.config.js","mtime":1646290558160},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_eslint-loader@2.2.1@eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMveWFuZ2xpbi9EZXNrdG9wL3Rlc3QvZmluZ2VybmZ0L3Z1ZS1hZG1pbi9ub2RlX21vZHVsZXMvX0BiYWJlbF9ydW50aW1lLWNvcmVqczJANy4xNy4yQEBiYWJlbC9ydW50aW1lLWNvcmVqczIvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3LmFycmF5LmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnN0cmluZy5pbmNsdWRlcyI7CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgZW51bWVyYWJsZU9ubHkgJiYgKHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KSksIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IG51bGwgIT0gYXJndW1lbnRzW2ldID8gYXJndW1lbnRzW2ldIDoge307IGkgJSAyID8gb3duS2V5cyhPYmplY3Qoc291cmNlKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSkgOiBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IHJldHVybiB0YXJnZXQ7IH0KCmltcG9ydCB7IGFzeW5jUm91dGVyTWFwIGFzIF9hc3luY1JvdXRlck1hcCwgY29uc3RhbnRSb3V0ZXJNYXAgfSBmcm9tICdAL3JvdXRlcic7Ci8qKgogKiDpgJrov4dtZXRhLnBlcm1z5Yik5pat5piv5ZCm5LiO5b2T5YmN55So5oi35p2D6ZmQ5Yy56YWNCiAqIEBwYXJhbSBwZXJtcwogKiBAcGFyYW0gcm91dGUKICovCgpmdW5jdGlvbiBoYXNQZXJtaXNzaW9uKHBlcm1zLCByb3V0ZSkgewogIGlmIChyb3V0ZS5tZXRhICYmIHJvdXRlLm1ldGEucGVybXMpIHsKICAgIHJldHVybiBwZXJtcy5zb21lKGZ1bmN0aW9uIChwZXJtKSB7CiAgICAgIHJldHVybiByb3V0ZS5tZXRhLnBlcm1zLmluY2x1ZGVzKHBlcm0pOwogICAgfSk7CiAgfSBlbHNlIHsKICAgIHJldHVybiB0cnVlOwogIH0KfQovKioKICog6YCS5b2S6L+H5ruk5byC5q2l6Lev55Sx6KGo77yM6L+U5Zue56ym5ZCI55So5oi36KeS6Imy5p2D6ZmQ55qE6Lev55Sx6KGoCiAqIEBwYXJhbSByb3V0ZXMgYXN5bmNSb3V0ZXJNYXAKICogQHBhcmFtIHBlcm1zCiAqLwoKCmZ1bmN0aW9uIGZpbHRlckFzeW5jUm91dGVyKHJvdXRlcywgcGVybXMpIHsKICB2YXIgcmVzID0gW107CiAgcm91dGVzLmZvckVhY2goZnVuY3Rpb24gKHJvdXRlKSB7CiAgICB2YXIgdG1wID0gX29iamVjdFNwcmVhZCh7fSwgcm91dGUpOwoKICAgIGlmICh0bXAuY2hpbGRyZW4pIHsKICAgICAgdG1wLmNoaWxkcmVuID0gZmlsdGVyQXN5bmNSb3V0ZXIodG1wLmNoaWxkcmVuLCBwZXJtcyk7CgogICAgICBpZiAodG1wLmNoaWxkcmVuICYmIHRtcC5jaGlsZHJlbi5sZW5ndGggPiAwKSB7CiAgICAgICAgcmVzLnB1c2godG1wKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaWYgKGhhc1Blcm1pc3Npb24ocGVybXMsIHRtcCkpIHsKICAgICAgICByZXMucHVzaCh0bXApOwogICAgICB9CiAgICB9CiAgfSk7CiAgcmV0dXJuIHJlczsKfQoKdmFyIHBlcm1pc3Npb24gPSB7CiAgc3RhdGU6IHsKICAgIHJvdXRlcnM6IGNvbnN0YW50Um91dGVyTWFwLAogICAgYWRkUm91dGVyczogW10KICB9LAogIG11dGF0aW9uczogewogICAgU0VUX1JPVVRFUlM6IGZ1bmN0aW9uIFNFVF9ST1VURVJTKHN0YXRlLCByb3V0ZXJzKSB7CiAgICAgIHN0YXRlLmFkZFJvdXRlcnMgPSByb3V0ZXJzOwogICAgICBzdGF0ZS5yb3V0ZXJzID0gY29uc3RhbnRSb3V0ZXJNYXAuY29uY2F0KHJvdXRlcnMpOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgR2VuZXJhdGVSb3V0ZXM6IGZ1bmN0aW9uIEdlbmVyYXRlUm91dGVzKF9yZWYsIGRhdGEpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICB2YXIgcGVybXMgPSBkYXRhLnBlcm1zOwogICAgICAgIHZhciBhY2Nlc3NlZFJvdXRlcnM7IC8vIGNvbnN0IGFzeW5jUm91dGVyTWFwID0gdGhpcy5nZXR0ZXJzLnJvbGVzSWQgPT09IDIKICAgICAgICAvLyAgID8gX2FzeW5jUm91dGVyTWFwLmZpbHRlcihpdGVtID0+IGl0ZW0ucGF0aCAhPT0gJy9kYXNoYm9hcmQnKSA6IF9hc3luY1JvdXRlck1hcAoKICAgICAgICBpZiAocGVybXMuaW5jbHVkZXMoJyonKSkgewogICAgICAgICAgYWNjZXNzZWRSb3V0ZXJzID0gX2FzeW5jUm91dGVyTWFwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhY2Nlc3NlZFJvdXRlcnMgPSBmaWx0ZXJBc3luY1JvdXRlcihfYXN5bmNSb3V0ZXJNYXAsIHBlcm1zKTsKICAgICAgICB9CgogICAgICAgIGNvbW1pdCgnU0VUX1JPVVRFUlMnLCBhY2Nlc3NlZFJvdXRlcnMpOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSk7CiAgICB9CiAgfQp9OwpleHBvcnQgZGVmYXVsdCBwZXJtaXNzaW9uOw=="},{"version":3,"sources":["/Users/yanglin/Desktop/test/fingernft/vue-admin/src/store/modules/permission.js"],"names":["asyncRouterMap","_asyncRouterMap","constantRouterMap","hasPermission","perms","route","meta","some","perm","includes","filterAsyncRouter","routes","res","forEach","tmp","children","length","push","permission","state","routers","addRouters","mutations","SET_ROUTERS","concat","actions","GenerateRoutes","data","commit","Promise","resolve","accessedRouters"],"mappings":";;;;;;;;;;;AAAA,SAASA,cAAc,IAAIC,eAA3B,EAA4CC,iBAA5C,QAAqE,UAArE;AACA;AACA;AACA;AACA;AACA;;AACA,SAASC,aAAT,CAAuBC,KAAvB,EAA8BC,KAA9B,EAAqC;AACnC,MAAIA,KAAK,CAACC,IAAN,IAAcD,KAAK,CAACC,IAAN,CAAWF,KAA7B,EAAoC;AAClC,WAAOA,KAAK,CAACG,IAAN,CAAW,UAAAC,IAAI;AAAA,aAAIH,KAAK,CAACC,IAAN,CAAWF,KAAX,CAAiBK,QAAjB,CAA0BD,IAA1B,CAAJ;AAAA,KAAf,CAAP;AACD,GAFD,MAEO;AACL,WAAO,IAAP;AACD;AACF;AAED;AACA;AACA;AACA;AACA;;;AACA,SAASE,iBAAT,CAA2BC,MAA3B,EAAmCP,KAAnC,EAA0C;AACxC,MAAMQ,GAAG,GAAG,EAAZ;AAEAD,EAAAA,MAAM,CAACE,OAAP,CAAe,UAAAR,KAAK,EAAI;AACtB,QAAMS,GAAG,qBAAQT,KAAR,CAAT;;AACA,QAAIS,GAAG,CAACC,QAAR,EAAkB;AAChBD,MAAAA,GAAG,CAACC,QAAJ,GAAeL,iBAAiB,CAACI,GAAG,CAACC,QAAL,EAAeX,KAAf,CAAhC;;AACA,UAAIU,GAAG,CAACC,QAAJ,IAAgBD,GAAG,CAACC,QAAJ,CAAaC,MAAb,GAAsB,CAA1C,EAA6C;AAC3CJ,QAAAA,GAAG,CAACK,IAAJ,CAASH,GAAT;AACD;AACF,KALD,MAKO;AACL,UAAIX,aAAa,CAACC,KAAD,EAAQU,GAAR,CAAjB,EAA+B;AAC7BF,QAAAA,GAAG,CAACK,IAAJ,CAASH,GAAT;AACD;AACF;AACF,GAZD;AAaA,SAAOF,GAAP;AACD;;AAED,IAAMM,UAAU,GAAG;AACjBC,EAAAA,KAAK,EAAE;AACLC,IAAAA,OAAO,EAAElB,iBADJ;AAELmB,IAAAA,UAAU,EAAE;AAFP,GADU;AAKjBC,EAAAA,SAAS,EAAE;AACTC,IAAAA,WAAW,EAAE,qBAACJ,KAAD,EAAQC,OAAR,EAAoB;AAC/BD,MAAAA,KAAK,CAACE,UAAN,GAAmBD,OAAnB;AACAD,MAAAA,KAAK,CAACC,OAAN,GAAgBlB,iBAAiB,CAACsB,MAAlB,CAAyBJ,OAAzB,CAAhB;AACD;AAJQ,GALM;AAWjBK,EAAAA,OAAO,EAAE;AACPC,IAAAA,cADO,gCACoBC,IADpB,EAC0B;AAAA,UAAhBC,MAAgB,QAAhBA,MAAgB;AAC/B,aAAO,IAAIC,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5B,YAAQ1B,KAAR,GAAkBuB,IAAlB,CAAQvB,KAAR;AACA,YAAI2B,eAAJ,CAF4B,CAG5B;AACA;;AACA,YAAI3B,KAAK,CAACK,QAAN,CAAe,GAAf,CAAJ,EAAyB;AACvBsB,UAAAA,eAAe,GAAG9B,eAAlB;AACD,SAFD,MAEO;AACL8B,UAAAA,eAAe,GAAGrB,iBAAiB,CAACT,eAAD,EAAkBG,KAAlB,CAAnC;AACD;;AACDwB,QAAAA,MAAM,CAAC,aAAD,EAAgBG,eAAhB,CAAN;AACAD,QAAAA,OAAO;AACR,OAZM,CAAP;AAaD;AAfM;AAXQ,CAAnB;AA8BA,eAAeZ,UAAf","sourcesContent":["import { asyncRouterMap as _asyncRouterMap, constantRouterMap } from '@/router'\n/**\n * 通过meta.perms判断是否与当前用户权限匹配\n * @param perms\n * @param route\n */\nfunction hasPermission(perms, route) {\n  if (route.meta && route.meta.perms) {\n    return perms.some(perm => route.meta.perms.includes(perm))\n  } else {\n    return true\n  }\n}\n\n/**\n * 递归过滤异步路由表，返回符合用户角色权限的路由表\n * @param routes asyncRouterMap\n * @param perms\n */\nfunction filterAsyncRouter(routes, perms) {\n  const res = []\n\n  routes.forEach(route => {\n    const tmp = { ...route }\n    if (tmp.children) {\n      tmp.children = filterAsyncRouter(tmp.children, perms)\n      if (tmp.children && tmp.children.length > 0) {\n        res.push(tmp)\n      }\n    } else {\n      if (hasPermission(perms, tmp)) {\n        res.push(tmp)\n      }\n    }\n  })\n  return res\n}\n\nconst permission = {\n  state: {\n    routers: constantRouterMap,\n    addRouters: []\n  },\n  mutations: {\n    SET_ROUTERS: (state, routers) => {\n      state.addRouters = routers\n      state.routers = constantRouterMap.concat(routers)\n    }\n  },\n  actions: {\n    GenerateRoutes({ commit }, data) {\n      return new Promise(resolve => {\n        const { perms } = data\n        let accessedRouters\n        // const asyncRouterMap = this.getters.rolesId === 2\n        //   ? _asyncRouterMap.filter(item => item.path !== '/dashboard') : _asyncRouterMap\n        if (perms.includes('*')) {\n          accessedRouters = _asyncRouterMap\n        } else {\n          accessedRouters = filterAsyncRouter(_asyncRouterMap, perms)\n        }\n        commit('SET_ROUTERS', accessedRouters)\n        resolve()\n      })\n    }\n  }\n}\n\nexport default permission\n"]}]}