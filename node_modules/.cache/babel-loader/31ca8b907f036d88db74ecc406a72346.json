{"remainingRequest":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_eslint-loader@2.2.1@eslint-loader/index.js??ref--13-0!/Users/yanglin/Desktop/test/fingernft/vue-admin/src/api/request.js","dependencies":[{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/src/api/request.js","mtime":1646290558167},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/babel.config.js","mtime":1646290558160},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_eslint-loader@2.2.1@eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnJlZ2V4cC5tYXRjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNy5hcnJheS5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5zdHJpbmcuaW5jbHVkZXMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXInOwppbXBvcnQgeyBpc0V4dGVybmFsIH0gZnJvbSAnQC91dGlscy92YWxpZGF0ZSc7CmltcG9ydCBlcnJub0hhbmRsZXIgZnJvbSAnQC91dGlscy9lcnJub0hhbmRsZXInOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCB7IGdldFRva2VuLCByZW1vdmVUb2tlbiB9IGZyb20gIkAvdXRpbHMvYXV0aCI7CmltcG9ydCBpMThuIGZyb20gIkAvaTE4bi9pMThuLmpzIjsKdmFyIHNlcnZpY2UgPSBheGlvcy5jcmVhdGUoewogIHRpbWVvdXQ6IDMwICogMTAwMDAwMCAvLyByZXF1ZXN0IHRpbWVvdXQKCn0pOwpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgaWYgKGlzRXh0ZXJuYWwoY29uZmlnLnVybCkpIGNvbmZpZy5iYXNlVVJMID0gJyc7IC8vIGNybUNoYXQgYXBpIOeUqOeahOS4jeS4gOagt+eahOS7o+eQhgoKICBpZiAoIWNvbmZpZy5oZWFkZXJzWydGaW5nZXJOZnQtQWRtaW4tVG9rZW4nXSAmJiBnZXRUb2tlbigpKSB7CiAgICBjb25maWcuaGVhZGVyc1snRmluZ2VyTmZ0LUFkbWluLVRva2VuJ10gPSBnZXRUb2tlbigpOwogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgY29uc29sZS5sb2coJ2Vycm9yJywgZXJyb3IpOwogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgaWYgKHJlc3BvbnNlLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddICYmIHJlc3BvbnNlLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddLmluY2x1ZGVzKCduZC5tcy1leGNlbCcpKSB7CiAgICByZXR1cm4gcmVzcG9uc2U7CiAgfQoKICBpZiAocmVzcG9uc2UuaGVhZGVyc1snY29udGVudC1kaXNwb3NpdGlvbiddICYmIHJlc3BvbnNlLmhlYWRlcnNbJ2NvbnRlbnQtZGlzcG9zaXRpb24nXS5pbmNsdWRlcygnYXR0YWNobWVudCcpKSB7CiAgICByZXR1cm4gcmVzcG9uc2U7CiAgfQoKICB2YXIgX2Vycm5vSGFuZGxlciA9IGVycm5vSGFuZGxlcihyZXNwb25zZSksCiAgICAgIGVycm5vID0gX2Vycm5vSGFuZGxlci5lcnJubywKICAgICAgZXJybXNnID0gX2Vycm5vSGFuZGxlci5lcnJtc2csCiAgICAgIHR5cGUgPSBfZXJybm9IYW5kbGVyLnR5cGU7CgogIHZhciB1cmwgPSByZXNwb25zZS5jb25maWcudXJsLm1hdGNoKC8oXC9hZG1pbnxcL2p6c2hvcCkoLiopLylbMF07IC8vY29uc29sZS5sb2codHlwZSwndHlwZScpCgogIHR5cGUgPT09ICdlcnJvcicgJiYgVnVlLnByb3RvdHlwZS4kbm90aWZ5KHsKICAgIHR5cGU6IHR5cGUsCiAgICB0aXRsZTogZXJybm8gKyAiICAiLmNvbmNhdCh1cmwpLAogICAgbWVzc2FnZTogaTE4bi50KCdyZXNwb25zZS4nICsgZXJybm8pLAogICAgZHVyYXRpb246IDMuNSAqIDEwMDAKICB9KTsKCiAgaWYgKGVycm1zZyA9PT0gJ3VuYXV0aHonKSB7CiAgICByZW1vdmVUb2tlbigpOwogICAgcm91dGVyLnB1c2goIi9sb2dpbiIpOwogIH0KCiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXNwb25zZS5kYXRhKTsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgdmFyIF9lcnJub0hhbmRsZXIyID0gZXJybm9IYW5kbGVyKGVycm9yKSwKICAgICAgZXJybm8gPSBfZXJybm9IYW5kbGVyMi5lcnJubywKICAgICAgZXJybXNnID0gX2Vycm5vSGFuZGxlcjIuZXJybXNnLAogICAgICB0eXBlID0gX2Vycm5vSGFuZGxlcjIudHlwZTsKCiAgdmFyIHVybCA9IGVycm9yLmNvbmZpZy51cmwubWF0Y2goLyhcL2FkbWlufFwvanpzaG9wKSguKikvKVswXTsKICBWdWUucHJvdG90eXBlLiRub3RpZnkoewogICAgdHlwZTogdHlwZSwKICAgIHRpdGxlOiBlcnJubyArICIgICIuY29uY2F0KHVybCksCiAgICBtZXNzYWdlOiBpMThuLnQoJ3Jlc3BvbnNlLicgKyBlcnJubyksCiAgICBkdXJhdGlvbjogMy41ICogMTAwMAogIH0pOwogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpleHBvcnQgZGVmYXVsdCBzZXJ2aWNlOw=="},{"version":3,"sources":["/Users/yanglin/Desktop/test/fingernft/vue-admin/src/api/request.js"],"names":["axios","store","router","isExternal","errnoHandler","Vue","getToken","removeToken","i18n","service","create","timeout","interceptors","request","use","config","url","baseURL","headers","error","console","log","Promise","reject","response","includes","errno","errmsg","type","match","prototype","$notify","title","message","t","duration","push","resolve","data"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport store from '@/store'\nimport router from '@/router'\nimport { isExternal } from '@/utils/validate'\nimport errnoHandler from '@/utils/errnoHandler'\nimport Vue from 'vue'\nimport { getToken,removeToken } from \"@/utils/auth\";\nimport i18n from \"@/i18n/i18n.js\";\n\nconst service = axios.create({\n  timeout: 30 * 1000000 // request timeout\n})\n\nservice.interceptors.request.use(\n  config => {\n    if (isExternal(config.url)) config.baseURL = '' // crmChat api 用的不一样的代理\n    if (!config.headers['FingerNft-Admin-Token'] && getToken() ) {\n      config.headers['FingerNft-Admin-Token'] = getToken();\n    }\n \n    return config\n  },\n  error => {\n    console.log('error', error)\n    return Promise.reject(error)\n  }\n)\n\nservice.interceptors.response.use(\n  response => {\n    if (response.headers['content-type'] && response.headers['content-type'].includes('nd.ms-excel')) {\n      return response\n    }\n    if (response.headers['content-disposition'] && response.headers['content-disposition'].includes('attachment')) {\n      return response\n    }\n    const { errno, errmsg, type } = errnoHandler(response)\n    const url = response.config.url.match(/(\\/admin|\\/jzshop)(.*)/)[0]\n    //console.log(type,'type')\n\n\n    type === 'error' && Vue.prototype.$notify({\n      type,\n      title: errno + `  ${url}`,\n      message:i18n.t('response.'+errno),\n      duration: 3.5 * 1000\n    })\n    if(errmsg==='unauthz'){\n        removeToken();\n        router.push(\"/login\");\n    }\n    return Promise.resolve(response.data)\n  }, error => {\n    const { errno, errmsg, type } = errnoHandler(error)\n    const url = error.config.url.match(/(\\/admin|\\/jzshop)(.*)/)[0]\n    Vue.prototype.$notify({\n      type,\n      title: errno + `  ${url}`,\n      message: i18n.t('response.'+errno),\n      duration: 3.5 * 1000\n    })\n    return Promise.reject(error)\n  })\n\nexport default service\n"]}]}