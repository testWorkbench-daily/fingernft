{"remainingRequest":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_eslint-loader@2.2.1@eslint-loader/index.js??ref--13-0!/Users/yanglin/Desktop/test/fingernft/vue-admin/src/permission.js","dependencies":[{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/src/permission.js","mtime":1646290558201},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/babel.config.js","mtime":1646290558160},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_eslint-loader@2.2.1@eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNy5hcnJheS5pbmNsdWRlcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL1VzZXJzL3lhbmdsaW4vRGVza3RvcC90ZXN0L2Zpbmdlcm5mdC92dWUtYWRtaW4vbm9kZV9tb2R1bGVzL19AYmFiZWxfcnVudGltZS1jb3JlanMyQDcuMTcuMkBAYmFiZWwvcnVudGltZS1jb3JlanMyL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5LmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3lhbmdsaW4vRGVza3RvcC90ZXN0L2Zpbmdlcm5mdC92dWUtYWRtaW4vbm9kZV9tb2R1bGVzL19AYmFiZWxfcnVudGltZS1jb3JlanMyQDcuMTcuMkBAYmFiZWwvcnVudGltZS1jb3JlanMyL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGVudW1lcmFibGVPbmx5ICYmIChzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSkpLCBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpICUgMiA/IG93bktleXMoT2JqZWN0KHNvdXJjZSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSByZXR1cm4gdGFyZ2V0OyB9CgppbXBvcnQgcm91dGVyIGZyb20gIi4vcm91dGVyIjsKaW1wb3J0IHN0b3JlIGZyb20gIi4vc3RvcmUiOwppbXBvcnQgTlByb2dyZXNzIGZyb20gIm5wcm9ncmVzcyI7IC8vIHByb2dyZXNzIGJhcgoKaW1wb3J0ICJucHJvZ3Jlc3MvbnByb2dyZXNzLmNzcyI7IC8vIHByb2dyZXNzIGJhciBzdHlsZQoKaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICJAL3V0aWxzL2F1dGgiOwppbXBvcnQgaTE4biBmcm9tICJAL2kxOG4vaTE4bi5qcyI7Ck5Qcm9ncmVzcy5jb25maWd1cmUoewogIHNob3dTcGlubmVyOiBmYWxzZQp9KTsgLy8gTlByb2dyZXNzIENvbmZpZ3VyYXRpb24KLy8gcGVybWlzc2lvbiBqdWRnZSBmdW5jdGlvbgoKZnVuY3Rpb24gaGFzUGVybWlzc2lvbihwZXJtcywgcGVybWlzc2lvbnMpIHsKICBpZiAocGVybXMuaW5kZXhPZigiKiIpID49IDApIHJldHVybiB0cnVlOyAvLyBhZG1pbiBwZXJtaXNzaW9uIHBhc3NlZCBkaXJlY3RseQoKICBpZiAoIXBlcm1pc3Npb25zKSByZXR1cm4gdHJ1ZTsKICByZXR1cm4gcGVybXMuc29tZShmdW5jdGlvbiAocGVybSkgewogICAgcmV0dXJuIHBlcm1pc3Npb25zLmluZGV4T2YocGVybSkgPj0gMDsKICB9KTsKfQoKdmFyIHdoaXRlTGlzdCA9IFsiL2xvZ2luIiwgIi9hdXRoLXJlZGlyZWN0Il07IC8vIG5vIHJlZGlyZWN0IHdoaXRlbGlzdAoKcm91dGVyLmJlZm9yZUVhY2goIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodG8sIGZyb20sIG5leHQpIHsKICAgIHZhciBoYXNUb2tlbiwgcGVybXMsIF9wZXJtczsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIE5Qcm9ncmVzcy5zdGFydCgpOyAvLyBzdGFydCBwcm9ncmVzcyBiYXIKCiAgICAgICAgICAgIGhhc1Rva2VuID0gZ2V0VG9rZW4oKTsKICAgICAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBpMThuLnQoJ3RpdGxlLm1hbmFnZUJhY2tncm91bmQnKSArICItIiArIGkxOG4udCh0by5tZXRhLnRpdGxlKTsKCiAgICAgICAgICAgIGlmICghc3RvcmUuZ2V0dGVycy5wZXJtcy5sZW5ndGgpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8g5bey57uP5ouJ5Y+WdXNlcl9pbmZvCiAgICAgICAgICAgIHBlcm1zID0gc3RvcmUuZ2V0dGVycy5wZXJtczsKCiAgICAgICAgICAgIGlmICh0by5mdWxsUGF0aCA9PSAiL2xvZ2luIiAmJiBoYXNUb2tlbikgewogICAgICAgICAgICAgIG5leHQoewogICAgICAgICAgICAgICAgcGF0aDogIi9kYXNoYm9hcmQiLAogICAgICAgICAgICAgICAgLy8gcXVlcnk6IHsgLi4udG8ucXVlcnksIHJlZGlyZWN0OiB3aGl0ZUxpc3QuaW5jbHVkZXModG8ucGF0aCkgPyAnL2Rhc2hib2FyZCcgOiB0by5wYXRoIH0sCiAgICAgICAgICAgICAgICByZXBsYWNlOiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgTlByb2dyZXNzLmRvbmUoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAoaGFzUGVybWlzc2lvbihwZXJtcywgdG8ubWV0YS5wZXJtcykpIHsKICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbmV4dCh7CiAgICAgICAgICAgICAgICAgIHBhdGg6ICIvbG9naW4iLAogICAgICAgICAgICAgICAgICBxdWVyeTogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0by5xdWVyeSksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3Q6IHdoaXRlTGlzdC5pbmNsdWRlcyh0by5wYXRoKSA/ICIvZGFzaGJvYXJkIiA6IHRvLnBhdGgKICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIHJlcGxhY2U6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM3OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIGlmICghaGFzVG9rZW4pIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzY7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghd2hpdGVMaXN0LmluY2x1ZGVzKHRvLnBhdGgpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzNDsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDEzOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTY7CiAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgiR2V0VXNlckluZm8iKTsKCiAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICBfcGVybXMgPSBzdG9yZS5nZXR0ZXJzLnBlcm1zOwogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTc7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMDsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCJHZW5lcmF0ZVJvdXRlcyIsIHsKICAgICAgICAgICAgICBwZXJtczogX3Blcm1zCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgIHJvdXRlci5hZGRSb3V0ZXMoc3RvcmUuZ2V0dGVycy5hZGRSb3V0ZXJzKTsKICAgICAgICAgICAgbmV4dChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRvKSwge30sIHsKICAgICAgICAgICAgICByZXBsYWNlOiB0cnVlCiAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI3OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjQ7CiAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMTcpOwogICAgICAgICAgICBuZXh0KHsKICAgICAgICAgICAgICBwYXRoOiAiL2xvZ2luIiwKICAgICAgICAgICAgICBxdWVyeTogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0by5xdWVyeSksIHt9LCB7CiAgICAgICAgICAgICAgICByZWRpcmVjdDogdG8ucGF0aCA9PT0gIi9sb2dpbiIgPyAiL2Rhc2hib2FyZCIgOiB0by5wYXRoCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZQogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzQ7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyOTsKICAgICAgICAgICAgX2NvbnRleHQudDEgPSBfY29udGV4dFsiY2F0Y2giXSgxMyk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzMzsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCJMb2dPdXQiKTsKCiAgICAgICAgICBjYXNlIDMzOgogICAgICAgICAgICBuZXh0KHsKICAgICAgICAgICAgICBwYXRoOiAiL2xvZ2luIiwKICAgICAgICAgICAgICBxdWVyeTogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0by5xdWVyeSksIHt9LCB7CiAgICAgICAgICAgICAgICByZWRpcmVjdDogdG8ucGF0aCA9PT0gIi9sb2dpbiIgPyAiL2Rhc2hib2FyZCIgOiB0by5wYXRoCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZQogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDM0OgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzc7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMzY6CiAgICAgICAgICAgIGlmICh3aGl0ZUxpc3QuaW5kZXhPZih0by5wYXRoKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAvLyDlnKjlhY3nmbvlvZXnmb3lkI3ljZXvvIznm7TmjqXov5vlhaUKICAgICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbmV4dCh7CiAgICAgICAgICAgICAgICBwYXRoOiAiL2xvZ2luIiwKICAgICAgICAgICAgICAgIHF1ZXJ5OiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRvLnF1ZXJ5KSwge30sIHsKICAgICAgICAgICAgICAgICAgcmVkaXJlY3Q6IHRvLnBhdGggPT09ICIvbG9naW4iID8gIi9kYXNoYm9hcmQiIDogdG8ucGF0aAogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICByZXBsYWNlOiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgTlByb2dyZXNzLmRvbmUoKTsgLy8gaWYgY3VycmVudCBwYWdlIGlzIGxvZ2luIHdpbGwgbm90IHRyaWdnZXIgYWZ0ZXJFYWNoIGhvb2ssIHNvIG1hbnVhbGx5IGhhbmRsZSBpdAogICAgICAgICAgICB9CgogICAgICAgICAgY2FzZSAzNzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzEzLCAyOV0sIFsxNywgMjRdXSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIsIF94MykgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCkpOwpyb3V0ZXIuYWZ0ZXJFYWNoKGZ1bmN0aW9uICgpIHsKICBOUHJvZ3Jlc3MuZG9uZSgpOyAvLyBmaW5pc2ggcHJvZ3Jlc3MgYmFyCn0pOw=="},{"version":3,"sources":["/Users/yanglin/Desktop/test/fingernft/vue-admin/src/permission.js"],"names":["router","store","NProgress","getToken","i18n","configure","showSpinner","hasPermission","perms","permissions","indexOf","some","perm","whiteList","beforeEach","to","from","next","start","hasToken","document","title","t","meta","getters","length","fullPath","path","replace","done","query","redirect","includes","dispatch","addRoutes","addRouters","afterEach"],"mappings":"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","sourcesContent":["import router from \"./router\";\nimport store from \"./store\";\nimport NProgress from \"nprogress\"; // progress bar\nimport \"nprogress/nprogress.css\"; // progress bar style\nimport { getToken } from \"@/utils/auth\";\nimport i18n from \"@/i18n/i18n.js\";\nNProgress.configure({ showSpinner: false }); // NProgress Configuration\n\n// permission judge function\nfunction hasPermission(perms, permissions) {\n  if (perms.indexOf(\"*\") >= 0) return true; // admin permission passed directly\n  if (!permissions) return true;\n  return perms.some((perm) => permissions.indexOf(perm) >= 0);\n}\n\nconst whiteList = [\"/login\", \"/auth-redirect\"]; // no redirect whitelist\n\nrouter.beforeEach(async (to, from, next) => {\n  \n  NProgress.start(); // start progress bar\n  const hasToken = getToken();\n  document.title = i18n.t('title.manageBackground') + `-` + i18n.t(to.meta.title);\n \n  if (store.getters.perms.length) {\n    // 已经拉取user_info\n    const { perms } = store.getters;\n    if (to.fullPath == `/login` && hasToken) {\n      next({\n        path: `/dashboard`,\n        // query: { ...to.query, redirect: whiteList.includes(to.path) ? '/dashboard' : to.path },\n        replace: true,\n      });\n      NProgress.done();\n    } else {\n      if (hasPermission(perms, to.meta.perms)) {\n        next();\n      } else {\n        next({\n          path: `/login`,\n          query: {\n            ...to.query,\n            redirect: whiteList.includes(to.path) ? \"/dashboard\" : to.path,\n          },\n          replace: true,\n        });\n      }\n    }\n  } else if (hasToken) {\n    if (whiteList.includes(to.path)) {\n      next();\n    } else {\n      try {\n        await store.dispatch(\"GetUserInfo\");\n        const perms = store.getters.perms;\n        try {\n          await store.dispatch(\"GenerateRoutes\", { perms });\n          router.addRoutes(store.getters.addRouters);\n\n          next({ ...to, replace: true });\n        } catch (e) {\n          next({\n            path: `/login`,\n            query: {\n              ...to.query,\n              redirect: to.path === \"/login\" ? \"/dashboard\" : to.path,\n            },\n            replace: true,\n          });\n        }\n      } catch (e) {\n        await store.dispatch(\"LogOut\");\n        next({\n          path: `/login`,\n          query: {\n            ...to.query,\n            redirect: to.path === \"/login\" ? \"/dashboard\" : to.path,\n          },\n          replace: true,\n        });\n      }\n    }\n  } else {\n   \n    if (whiteList.indexOf(to.path) !== -1) {\n      // 在免登录白名单，直接进入\n      next();\n    } else {\n      next({\n        path: `/login`,\n        query: {\n          ...to.query,\n          redirect: to.path === \"/login\" ? \"/dashboard\" : to.path,\n        },\n        replace: true,\n      });\n      NProgress.done(); // if current page is login will not trigger afterEach hook, so manually handle it\n    }\n  }\n});\n\nrouter.afterEach(() => {\n  NProgress.done(); // finish progress bar\n});\n"]}]}