{"remainingRequest":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!/Users/yanglin/Desktop/test/fingernft/vue-admin/src/components/Media.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/src/components/Media.vue","mtime":1646290558183},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/babel.config.js","mtime":1646290558160},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3LnN5bWJvbC5hc3luYy1pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5zeW1ib2wiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LmFycmF5LmZyb20iOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5yZWdleHAudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5zdHJpbmcuZW5kcy13aXRoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnJlZ2V4cC5zcGxpdCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5yZWdleHAucmVwbGFjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5zdHJpbmcuc3RhcnRzLXdpdGgiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi9Vc2Vycy95YW5nbGluL0Rlc2t0b3AvdGVzdC9maW5nZXJuZnQvdnVlLWFkbWluL25vZGVfbW9kdWxlcy9fQGJhYmVsX3J1bnRpbWUtY29yZWpzMkA3LjE3LjJAQGJhYmVsL3J1bnRpbWUtY29yZWpzMi9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eS5qcyI7CgpmdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSAidW5kZWZpbmVkIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0gfHwgb1siQEBpdGVyYXRvciJdOyBpZiAoIWl0KSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHZhciBGID0gZnVuY3Rpb24gRigpIHt9OyByZXR1cm4geyBzOiBGLCBuOiBmdW5jdGlvbiBuKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9LCBlOiBmdW5jdGlvbiBlKF9lKSB7IHRocm93IF9lOyB9LCBmOiBGIH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9IHZhciBub3JtYWxDb21wbGV0aW9uID0gdHJ1ZSwgZGlkRXJyID0gZmFsc2UsIGVycjsgcmV0dXJuIHsgczogZnVuY3Rpb24gcygpIHsgaXQgPSBpdC5jYWxsKG8pOyB9LCBuOiBmdW5jdGlvbiBuKCkgeyB2YXIgc3RlcCA9IGl0Lm5leHQoKTsgbm9ybWFsQ29tcGxldGlvbiA9IHN0ZXAuZG9uZTsgcmV0dXJuIHN0ZXA7IH0sIGU6IGZ1bmN0aW9uIGUoX2UyKSB7IGRpZEVyciA9IHRydWU7IGVyciA9IF9lMjsgfSwgZjogZnVuY3Rpb24gZigpIHsgdHJ5IHsgaWYgKCFub3JtYWxDb21wbGV0aW9uICYmIGl0LnJldHVybiAhPSBudWxsKSBpdC5yZXR1cm4oKTsgfSBmaW5hbGx5IHsgaWYgKGRpZEVycikgdGhyb3cgZXJyOyB9IH0gfTsgfQoKZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH0KCmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGVudW1lcmFibGVPbmx5ICYmIChzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSkpLCBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpICUgMiA/IG93bktleXMoT2JqZWN0KHNvdXJjZSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSByZXR1cm4gdGFyZ2V0OyB9CgovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk1lZGlhIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIHR5cGVEYXRhOiB7CiAgICAgICAgaW1hZ2U6IFsiLmpwZWciLCAiLmpwZyIsICIucG5nIiwgIi5naWYiXSwKICAgICAgICBhdWRpbzogWyIubXAzIiwgIi53YXYiLCAiLm9nYSJdLAogICAgICAgIHZpZGVvOiBbIi53ZWJtIiwgIi5tcDQiLCAiLm00diIsICIub2dnIiwgIi5vZ3YiLCAiLm1vdiJdCiAgICAgIH0KICAgIH07CiAgfSwKICBwcm9wczogewogICAgdXJsOiBTdHJpbmcsCiAgICB0eXBlOiBTdHJpbmcsCiAgICAvLyDlj6/pgInvvJrmmK/lkKbpooTop4gKICAgIGlzUHJldmlldzogewogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoewogICAgY29uZmlnOiBmdW5jdGlvbiBjb25maWcoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnVzZXIuY29uZmlnOwogICAgfQogIH0pKSwge30sIHsKICAgIG1lZGlhVXJsOiBmdW5jdGlvbiBtZWRpYVVybCgpIHsKICAgICAgaWYgKHRoaXMudXJsLnN0YXJ0c1dpdGgoImlwZnMiLCAwKSkgewogICAgICAgIHJldHVybiB0aGlzLnVybC5yZXBsYWNlKCJpcGZzOi8vIiwgdGhpcy5jb25maWcuaXBmc1VybCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMudXJsOwogICAgICB9CiAgICB9LAogICAgbWVkaWFUeXBlOiBmdW5jdGlvbiBtZWRpYVR5cGUoKSB7CiAgICAgIGlmICh0aGlzLnR5cGUpIHsKICAgICAgICBpZiAodGhpcy50eXBlID09PSAiaW1hZ2UiKSB7CiAgICAgICAgICByZXR1cm4gImltYWdlIjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHRoaXMudHlwZS5zcGxpdCgiLyIpWzBdID09PSAiYXVkaW8iKSB7CiAgICAgICAgICAgIHJldHVybiAiYXVkaW8iOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0aGlzLnR5cGUuc3BsaXQoIi8iKVswXSA9PT0gInZpZGVvIikgewogICAgICAgICAgICByZXR1cm4gInZpZGVvIjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMudHlwZURhdGEpIHsKICAgICAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLnR5cGVEYXRhW2tleV0pLAogICAgICAgICAgICAgIF9zdGVwOwoKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgICAgICAgaWYgKHRoaXMudXJsLmVuZHNXaXRoKGl0ZW0pKSB7CiAgICAgICAgICAgICAgICByZXR1cm4ga2V5OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9LAogICAgc3JjTGlzdDogZnVuY3Rpb24gc3JjTGlzdCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNQcmV2aWV3ID8gW3RoaXMubWVkaWFVcmxdIDogW107CiAgICB9CiAgfSkKfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACAA,eADA;AAEAC,MAFA,kBAEA;AACA;AACAC,0BADA;AAEAC;AACAC,gDADA;AAEAC,uCAFA;AAGAC;AAHA;AAFA;AAQA,GAXA;AAYAC;AACAC,eADA;AAEAC,gBAFA;AAGA;AACAC;AACAC;AADA;AAJA,GAZA;AAoBAC,4CACAC;AAAAC;AAAA;AAAA;AAAA,IADA;AAEAC,YAFA,sBAEA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KARA;AASAC,aATA,uBASA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA,OAXA,MAWA;AACA;AAAA,qDACA,kBADA;AAAA;;AAAA;AACA;AAAA;;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAMA;;AACA;AACA;AACA,KA/BA;AAgCAC,WAhCA,qBAgCA;AACA;AACA;AAlCA;AApBA","names":["name","data","dialogVisible","typeData","image","audio","video","props","url","type","isPreview","default","computed","mapState","config","mediaUrl","mediaType","srcList"],"sourceRoot":"src/components","sources":["Media.vue"],"sourcesContent":["<template>\n  <div class=\"il-media\">\n    <template v-if=\"mediaType === 'image'\">\n      <el-image\n        style=\"width: 100px; height: 100px\"\n        :src=\"mediaUrl\"\n        :preview-src-list=\"srcList\"\n      >\n      </el-image>\n    </template>\n    <template v-else>\n      <audio v-if=\"mediaType === 'audio'\" :src=\"mediaUrl\" controls></audio>\n      <div class=\"video-wrap\" v-if=\"mediaType === 'video'\">\n        <video\n        :src=\"mediaUrl\"\n        :width=\"isPreview ? '80%' : '200px'\"\n        :controls=\"isPreview ? 'controls' : ''\"\n      ></video>\n      <div @click=\"dialogVisible=true\" v-if=\"isPreview\" class=\"video-btn\"></div>\n      </div>\n    </template>\n    <el-dialog :visible.sync=\"dialogVisible\" class=\"media-dialog\">\n        <video\n        :src=\"mediaUrl\"\n        width=\"100%\"\n        controls\n      ></video>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nexport default {\n  name: \"Media\",\n  data() {\n    return {\n      dialogVisible: false,\n      typeData: {\n        image: [\".jpeg\", \".jpg\", \".png\", \".gif\"],\n        audio: [\".mp3\", \".wav\", \".oga\"],\n        video: [\".webm\", \".mp4\", \".m4v\", \".ogg\", \".ogv\", \".mov\"],\n      },\n    };\n  },\n  props: {\n    url: String,\n    type: String,\n    // 可选：是否预览\n    isPreview: {\n      default: false,\n    },\n  },\n  computed: {\n    ...mapState({ config: (state) => state.user.config }),\n    mediaUrl() {\n      if (this.url.startsWith(\"ipfs\", 0)) {\n        return this.url.replace(\"ipfs://\", this.config.ipfsUrl);\n      } else {\n        return this.url;\n      }\n    },\n    mediaType() {\n      if (this.type) {\n        if (this.type === \"image\") {\n          return \"image\";\n        } else {\n          if (this.type.split(\"/\")[0] === \"audio\") {\n            return \"audio\";\n          }\n          if (this.type.split(\"/\")[0] === \"video\") {\n            return \"video\";\n          }\n        }\n      } else {\n        for (let key in this.typeData) {\n          for(let item of this.typeData[key]) {\n            if(this.url.endsWith(item)) {\n              return key\n            }\n          }\n        }\n        return\n      }\n    },\n    srcList() {\n      return this.isPreview ? [this.mediaUrl] : [];\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\ntable audio {\n  width: 80%;\n}\n.il-media:hover {\n  cursor: pointer;\n}\n.video-wrap{\n  position:relative\n}\n.video-btn{\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n</style>\n\n"]}]}