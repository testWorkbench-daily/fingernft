{"remainingRequest":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!/Users/yanglin/Desktop/test/fingernft/vue-admin/src/components/Media.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/src/components/Media.vue","mtime":1646290558183},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAidnVleCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTWVkaWEiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgdHlwZURhdGE6IHsKICAgICAgICBpbWFnZTogWyIuanBlZyIsICIuanBnIiwgIi5wbmciLCAiLmdpZiJdLAogICAgICAgIGF1ZGlvOiBbIi5tcDMiLCAiLndhdiIsICIub2dhIl0sCiAgICAgICAgdmlkZW86IFsiLndlYm0iLCAiLm1wNCIsICIubTR2IiwgIi5vZ2ciLCAiLm9ndiIsICIubW92Il0sCiAgICAgIH0sCiAgICB9OwogIH0sCiAgcHJvcHM6IHsKICAgIHVybDogU3RyaW5nLAogICAgdHlwZTogU3RyaW5nLAogICAgLy8g5Y+v6YCJ77ya5piv5ZCm6aKE6KeICiAgICBpc1ByZXZpZXc6IHsKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKHsgY29uZmlnOiAoc3RhdGUpID0+IHN0YXRlLnVzZXIuY29uZmlnIH0pLAogICAgbWVkaWFVcmwoKSB7CiAgICAgIGlmICh0aGlzLnVybC5zdGFydHNXaXRoKCJpcGZzIiwgMCkpIHsKICAgICAgICByZXR1cm4gdGhpcy51cmwucmVwbGFjZSgiaXBmczovLyIsIHRoaXMuY29uZmlnLmlwZnNVcmwpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0aGlzLnVybDsKICAgICAgfQogICAgfSwKICAgIG1lZGlhVHlwZSgpIHsKICAgICAgaWYgKHRoaXMudHlwZSkgewogICAgICAgIGlmICh0aGlzLnR5cGUgPT09ICJpbWFnZSIpIHsKICAgICAgICAgIHJldHVybiAiaW1hZ2UiOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAodGhpcy50eXBlLnNwbGl0KCIvIilbMF0gPT09ICJhdWRpbyIpIHsKICAgICAgICAgICAgcmV0dXJuICJhdWRpbyI7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy50eXBlLnNwbGl0KCIvIilbMF0gPT09ICJ2aWRlbyIpIHsKICAgICAgICAgICAgcmV0dXJuICJ2aWRlbyI7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLnR5cGVEYXRhKSB7CiAgICAgICAgICBmb3IobGV0IGl0ZW0gb2YgdGhpcy50eXBlRGF0YVtrZXldKSB7CiAgICAgICAgICAgIGlmKHRoaXMudXJsLmVuZHNXaXRoKGl0ZW0pKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGtleQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybgogICAgICB9CiAgICB9LAogICAgc3JjTGlzdCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNQcmV2aWV3ID8gW3RoaXMubWVkaWFVcmxdIDogW107CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Media.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Media.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"il-media\">\n    <template v-if=\"mediaType === 'image'\">\n      <el-image\n        style=\"width: 100px; height: 100px\"\n        :src=\"mediaUrl\"\n        :preview-src-list=\"srcList\"\n      >\n      </el-image>\n    </template>\n    <template v-else>\n      <audio v-if=\"mediaType === 'audio'\" :src=\"mediaUrl\" controls></audio>\n      <div class=\"video-wrap\" v-if=\"mediaType === 'video'\">\n        <video\n        :src=\"mediaUrl\"\n        :width=\"isPreview ? '80%' : '200px'\"\n        :controls=\"isPreview ? 'controls' : ''\"\n      ></video>\n      <div @click=\"dialogVisible=true\" v-if=\"isPreview\" class=\"video-btn\"></div>\n      </div>\n    </template>\n    <el-dialog :visible.sync=\"dialogVisible\" class=\"media-dialog\">\n        <video\n        :src=\"mediaUrl\"\n        width=\"100%\"\n        controls\n      ></video>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nexport default {\n  name: \"Media\",\n  data() {\n    return {\n      dialogVisible: false,\n      typeData: {\n        image: [\".jpeg\", \".jpg\", \".png\", \".gif\"],\n        audio: [\".mp3\", \".wav\", \".oga\"],\n        video: [\".webm\", \".mp4\", \".m4v\", \".ogg\", \".ogv\", \".mov\"],\n      },\n    };\n  },\n  props: {\n    url: String,\n    type: String,\n    // 可选：是否预览\n    isPreview: {\n      default: false,\n    },\n  },\n  computed: {\n    ...mapState({ config: (state) => state.user.config }),\n    mediaUrl() {\n      if (this.url.startsWith(\"ipfs\", 0)) {\n        return this.url.replace(\"ipfs://\", this.config.ipfsUrl);\n      } else {\n        return this.url;\n      }\n    },\n    mediaType() {\n      if (this.type) {\n        if (this.type === \"image\") {\n          return \"image\";\n        } else {\n          if (this.type.split(\"/\")[0] === \"audio\") {\n            return \"audio\";\n          }\n          if (this.type.split(\"/\")[0] === \"video\") {\n            return \"video\";\n          }\n        }\n      } else {\n        for (let key in this.typeData) {\n          for(let item of this.typeData[key]) {\n            if(this.url.endsWith(item)) {\n              return key\n            }\n          }\n        }\n        return\n      }\n    },\n    srcList() {\n      return this.isPreview ? [this.mediaUrl] : [];\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\ntable audio {\n  width: 80%;\n}\n.il-media:hover {\n  cursor: pointer;\n}\n.video-wrap{\n  position:relative\n}\n.video-btn{\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n</style>\n\n"]}]}