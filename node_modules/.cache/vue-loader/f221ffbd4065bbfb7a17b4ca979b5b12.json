{"remainingRequest":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!/Users/yanglin/Desktop/test/fingernft/vue-admin/src/views/sys/log.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/src/views/sys/log.vue","mtime":1646290558232},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vICBpbXBvcnQgeyBsaXN0TG9nIH0gZnJvbSAnQC9hcGkvbG9nJwppbXBvcnQgUGFnaW5hdGlvbiBmcm9tICJAL2NvbXBvbmVudHMvUGFnaW5hdGlvbiI7CmltcG9ydCBpMThuIGZyb20gIkAvaTE4bi9pMThuLmpzIjsKICBjb25zdCB0eXBlTWFwID0gewogICAgICAgIDA6ICdzeXN0ZW1NYW5hZ2VtZW50LmdlbmVyYWxPcGVyYXRpb24nLAogICAgICAgIDE6ICdzeXN0ZW1NYW5hZ2VtZW50LnNhZmVPcGVyYXRpb24nLAogICAgICAgIDI6ICdzeXN0ZW1NYW5hZ2VtZW50Lm9yZGVyT3BlcmF0aW9uJywKICAgICAgICAzOiAnc3lzdGVtTWFuYWdlbWVudC5vdGhlck9wZXJhdGlvbnMnLAogICAgICB9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkxvZyIsCiAgY29tcG9uZW50czogeyBQYWdpbmF0aW9uIH0sCiAgZmlsdGVyczogewogICAgdHlwZUZpbHRlcih0eXBlKSB7CiAgICAgIHJldHVybiBpMThuLnQodHlwZU1hcFt0eXBlXSk7CiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6IG51bGwsCiAgICAgIHRvdGFsOiAwLAogICAgICBsaXN0TG9hZGluZzogdHJ1ZSwKICAgICAgbGlzdFF1ZXJ5OiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBsaW1pdDogMjAsCiAgICAgICAgbmFtZTogdW5kZWZpbmVkLAogICAgICAgIHNvcnQ6ICJjcmVhdGVfdGltZSIsCiAgICAgICAgb3JkZXI6ICJkZXNjIiwKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBuYW1lOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiB0aGlzLiR0KCdzeXN0ZW1NYW5hZ2VtZW50LnJ1bGUzJyksIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0TGlzdCgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRMaXN0KCkgewogICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZQogICAgICAvLyBsaXN0TG9nKHRoaXMubGlzdFF1ZXJ5KQogICAgICAvLyAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgLy8gICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdAogICAgICAvLyAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWwKICAgICAgLy8gICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZQogICAgICAvLyAgIH0pCiAgICAgIC8vICAgLmNhdGNoKCgpID0+IHsKICAgICAgLy8gICAgIHRoaXMubGlzdCA9IFtdCiAgICAgIC8vICAgICB0aGlzLnRvdGFsID0gMAogICAgICAvLyAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlCiAgICAgIC8vICAgfSkKICAgICAgICB0aGlzLiRhcGkoImxvZy5saXN0IiwgdGhpcy5saXN0UXVlcnkpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3Q7CiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDsKICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLmxpc3QgPSBbXTsKICAgICAgICAgIHRoaXMudG90YWwgPSAwOwogICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUZpbHRlcigpIHsKICAgICAgdGhpcy5saXN0UXVlcnkucGFnZSA9IDE7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["log.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"log.vue","sourceRoot":"src/views/sys","sourcesContent":["<template>\n  <div class=\"app-container\">\n\n    <!-- 查询和其他操作 -->\n    <div class=\"filter-container\">\n      <el-input v-model=\"listQuery.name\" clearable class=\"filter-item width-200px\" \n        :placeholder=\"$t('systemManagement.placeholder2')\" />\n      <el-button v-permission=\"['GET /admin/log/list']\" class=\"filter-item\" type=\"primary\"\n        icon=\"el-icon-search\" @click=\"handleFilter\">{{$t('systemManagement.select')}}</el-button>\n    </div>\n\n    <!-- 查询结果 -->\n    <el-table v-loading=\"listLoading\" :data=\"list\" :element-loading-text=\"$t('util.loadingText')\" border fit\n      highlight-current-row>\n      <el-table-column align=\"center\" :label=\"$t('systemManagement.operationsAdministrator')\" prop=\"admin\" />\n      <el-table-column align=\"center\" :label=\"$t('systemManagement.ipAddress')\" prop=\"ip\" />\n      <el-table-column align=\"center\" :label=\"$t('systemManagement.operatingTime')\" prop=\"createTime\" />\n      <el-table-column align=\"center\" :label=\"$t('systemManagement.operatingClass')\" prop=\"type\">\n        <template slot-scope=\"scope\">\n          <!-- <el-tag>{{ scope.row.type | $t(typeFilter[scope.row.type]) }}</el-tag> -->\n          <el-tag>{{ scope.row.type | typeFilter }}</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" :label=\"$t('systemManagement.operationAction')\" prop=\"action\" >\n        <template slot-scope=\"scope\">\n          {{$t('systemManagement.'+scope.row.action)}}\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" :label=\"$t('systemManagement.operatingState')\" prop=\"status\">\n        <template slot-scope=\"scope\">\n          <el-tag :type=\"scope.row.status ? 'success' : 'error' \">\n            {{ scope.row.status ? $t('util.success') : $t('util.fail') }}</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" :label=\"$t('systemManagement.operationResult')\" prop=\"result\" />\n      <el-table-column align=\"center\" :label=\"$t('systemManagement.noteInformation')\" prop=\"comment\" />\n\n    </el-table>\n\n    <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"listQuery.page\"\n      :limit.sync=\"listQuery.limit\" @pagination=\"getList\" />\n\n  </div>\n</template>\n\n<script>\n//  import { listLog } from '@/api/log'\nimport Pagination from \"@/components/Pagination\";\nimport i18n from \"@/i18n/i18n.js\";\n  const typeMap = {\n        0: 'systemManagement.generalOperation',\n        1: 'systemManagement.safeOperation',\n        2: 'systemManagement.orderOperation',\n        3: 'systemManagement.otherOperations',\n      };\nexport default {\n  name: \"Log\",\n  components: { Pagination },\n  filters: {\n    typeFilter(type) {\n      return i18n.t(typeMap[type]);\n    },\n  },\n  data() {\n    return {\n      list: null,\n      total: 0,\n      listLoading: true,\n      listQuery: {\n        page: 1,\n        limit: 20,\n        name: undefined,\n        sort: \"create_time\",\n        order: \"desc\",\n      },\n      rules: {\n        name: [\n          { required: true, message: this.$t('systemManagement.rule3'), trigger: \"blur\" },\n        ],\n      },\n    };\n  },\n  created() {\n    this.getList()\n  },\n  methods: {\n    getList() {\n      this.listLoading = true\n      // listLog(this.listQuery)\n      //   .then(response => {\n      //     this.list = response.data.list\n      //     this.total = response.data.total\n      //     this.listLoading = false\n      //   })\n      //   .catch(() => {\n      //     this.list = []\n      //     this.total = 0\n      //     this.listLoading = false\n      //   })\n        this.$api(\"log.list\", this.listQuery)\n        .then((response) => {\n          this.list = response.data.list;\n          this.total = response.data.total;\n          this.listLoading = false;\n        })\n        .catch(() => {\n          this.list = [];\n          this.total = 0;\n          this.listLoading = false;\n        });\n    },\n    handleFilter() {\n      this.listQuery.page = 1;\n      this.getList();\n    },\n  },\n};\n</script>\n<style scoped>\n.width-200px{\n  width:200px\n}\n</style>"]}]}