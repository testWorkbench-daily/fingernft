{"remainingRequest":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!/Users/yanglin/Desktop/test/fingernft/vue-admin/src/components/Notice/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/src/components/Notice/index.vue","mtime":1646290558183},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanglin/Desktop/test/fingernft/vue-admin/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCB7IG5Ob3RpY2UsIHJlYWRBbGwgfSBmcm9tICdAL2FwaS9wcm9maWxlJwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBoYXNOb3RpY2U6IGZhbHNlLAogICAgICB0aW1lcjogIiIsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHt9LAogIG1vdW50ZWQoKSB7fSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICAgIHRoaXMuJHJlZnMuYXVkaW9SZWYucGF1c2UoKTsKICB9LAogIC8vIGNyZWF0ZWQoKSB7CiAgLy8gICB0aGlzLmNoZWNrTm90aWNlKCk7CiAgLy8gICB0aGlzLmhhbmRsZVZpc2liaWxpdHlDaGFuZ2UgPSB0aGlzLmhhbmRsZVZpc2liaWxpdHlDaGFuZ2UuYmluZCh0aGlzKTsKICAvLyAgIHRoaXMuY2hlY2tOb3RpY2UgPSB0aGlzLmNoZWNrTm90aWNlLmJpbmQodGhpcyk7CiAgLy8gICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKAogIC8vICAgICAidmlzaWJpbGl0eWNoYW5nZSIsCiAgLy8gICAgIHRoaXMuaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSwKICAvLyAgICAgZmFsc2UKICAvLyAgICk7CiAgLy8gICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwodGhpcy5jaGVja05vdGljZSwgMTAwMCAqIDYwKTsKICAvLyB9LAogIG1ldGhvZHM6IHsKICAgIGNsaWNrKCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9OT1RJQ0UiLCBmYWxzZSk7CiAgICAgIC8vIGlmICh0aGlzLiRyb3V0ZS5wYXRoID09PSAnL3Byb2ZpbGUvbm90aWNlJykgcmV0dXJuCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogIi9wcm9maWxlL25vdGljZSIgfSk7CiAgICB9LAogICAgLy8gY2hlY2tOb3RpY2UoKSB7CiAgICAvLyAgIG5Ob3RpY2UoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgIC8vICAgICB0aGlzLmhhc05vdGljZSA9IChyZXNwb25zZSAmJiByZXNwb25zZS5kYXRhICYmIHJlc3BvbnNlLmRhdGEgPiAwKSB8fCBmYWxzZQogICAgLy8gICAgIHRoaXMuaGFzTm90aWNlICYmICFkb2N1bWVudC5oaWRkZW4gJiYgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgLy8gICAgICAgdGhpcy4kcmVmcy5hdWRpb1JlZi5wbGF5KCkKICAgIC8vICAgICAgIHJlYWRBbGwoKQogICAgLy8gICAgIH0pCiAgICAvLyAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdTRVRfTk9USUNFJywgdGhpcy5oYXNOb3RpY2UpCiAgICAvLyAgIH0pCiAgICAvLyB9LAogICAgaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSgpIHsKICAgICAgaWYgKGRvY3VtZW50LmhpZGRlbiAmJiB0aGlzLiRyZWZzLmF1ZGlvUmVmKQogICAgICAgIHRoaXMuJHJlZnMuYXVkaW9SZWYgJiYgdGhpcy4kcmVmcy5hdWRpb1JlZi5wYXVzZSgpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;AAUA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/Notice","sourcesContent":["<template>\n  <div>\n    <el-badge :is-dot=\"hasNotice\">\n      <i class=\"el-icon-bell\" @click=\"click\" />\n    </el-badge>\n    <audio ref=\"audioRef\" preload=\"preload\" src=\"/prompt.mp3\" />\n  </div>\n</template>\n\n<script>\n// import { nNotice, readAll } from '@/api/profile'\n\nexport default {\n  data() {\n    return {\n      hasNotice: false,\n      timer: \"\",\n    };\n  },\n  computed: {},\n  mounted() {},\n  beforeDestroy() {\n    clearInterval(this.timer);\n    this.$refs.audioRef.pause();\n  },\n  // created() {\n  //   this.checkNotice();\n  //   this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\n  //   this.checkNotice = this.checkNotice.bind(this);\n  //   document.addEventListener(\n  //     \"visibilitychange\",\n  //     this.handleVisibilityChange,\n  //     false\n  //   );\n  //   this.timer = setInterval(this.checkNotice, 1000 * 60);\n  // },\n  methods: {\n    click() {\n      this.$store.commit(\"SET_NOTICE\", false);\n      // if (this.$route.path === '/profile/notice') return\n      this.$router.push({ path: \"/profile/notice\" });\n    },\n    // checkNotice() {\n    //   nNotice().then(response => {\n    //     this.hasNotice = (response && response.data && response.data > 0) || false\n    //     this.hasNotice && !document.hidden && this.$nextTick(() => {\n    //       this.$refs.audioRef.play()\n    //       readAll()\n    //     })\n    //     this.$store.commit('SET_NOTICE', this.hasNotice)\n    //   })\n    // },\n    handleVisibilityChange() {\n      if (document.hidden && this.$refs.audioRef)\n        this.$refs.audioRef && this.$refs.audioRef.pause();\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.el-badge__content.is-fixed.is-dot {\n  right: 5px;\n  top: 10px;\n}\n\n.el-icon-bell {\n  font-size: 20px;\n  cursor: pointer;\n}\n</style>\n"]}]}